{"version":3,"sources":["api/workLogger.ts","utils.ts","api/OAuth.ts","components/StatusBanner.tsx","components/menu/EnterButton.tsx","components/menu/ExitButton.tsx","components/menu/SendLogButton.tsx","components/GoogleAuth.tsx","components/menu/WorkLoggerMenu.tsx","components/LoadingSpinner.tsx","components/App.tsx","index.tsx"],"names":["axios","create","baseURL","validUser","user","getBasicProfile","getEmail","split","userAgent","window","navigator","isUsingSafari","indexOf","SuccessBanner","props","hideClass","mounted","bannerTypeClass","success","CSSTransition","in","timeout","classNames","className","role","message","EnterButton","handleClick","a","isInside","workLogger","post","dateString","Date","toString","trackLogRequest","onClick","ExitButton","put","SendLogButton","userEmail","gapi","auth2","getAuthInstance","currentUser","get","GoogleAuth","handleSignIn","signIn","id","this","src","process","alt","React","Component","WorkLoggerMenu","isSignedIn","isInOffice","LoadingSpinner","App","state","logStatus","inOffice","isLoading","bannerMessage","componentDidMount","load","onAuthLoad","client","init","clientId","scope","authInstance","listen","onSignIn","setState","fetchAppStatus","alert","signedIn","signOut","data","setTimeout","renderContent","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.6aae67a2.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport default axios.create({ baseURL: \"https://work-logger-app.herokuapp.com\" });","export const validUser = (user: GoogleUser): boolean => {\n    return user.getBasicProfile().getEmail().split(\"@\")[1] === \"techsee.me\";\n} \n\nconst userAgent = window.navigator.userAgent;\n\nexport const isUsingSafari = userAgent.indexOf(\"Chrome\") === -1 && userAgent.indexOf(\"Safari\") > -1;","export default \"351123592886-r4dbiuaq9ds53a94456ambh7tjcpm46k.apps.googleusercontent.com\";","import React from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\nimport \"./StatusBanner.scss\";\n\ntype Props = {\n    mounted: boolean,\n    success: boolean,\n    message: string\n}\n\nconst SuccessBanner = (props: Props) => {\n    const hideClass = props.mounted ? \"movedown\" : null;\n    const bannerTypeClass = props.success ? \"alert-success\" : \"alert-danger\";\n\n    const getBannerMessage = (): string => {\n            if(props.success) {\n                return \"Success!\";\n            }\n            return props.message;\n        }\n\n    return (\n        <CSSTransition in={props.mounted} timeout={1000} classNames=\"fade\">\n            <div className={`alert ${bannerTypeClass} ${hideClass}`} role=\"alert\">\n                {getBannerMessage()}\n            </div>\n        </CSSTransition>\n    );\n}\n\nexport default SuccessBanner;","import React from \"react\";\nimport workLogger from \"../../api/workLogger\";\nimport \"./EnterButton.scss\";\n\ntype Props = {\n    trackLogRequest: (success: boolean, enter: boolean | null, bannerMessage?: string) => void,\n    isInside: boolean\n}\n\nconst EnterButton = (props: Props) => {\n\n    const handleClick = async () => {\n        try {\n            if(!props.isInside) {\n                await workLogger.post(\"/log\", {\n                    dateString: new Date().toString()\n                });\n                props.trackLogRequest(true, true);\n            }\n        } catch(err) {\n            if(err.message === \"Network Error\") {\n                props.trackLogRequest(true, true);\n            } else {\n                props.trackLogRequest(false, false, \"Something Went Wrong!\");\n            }\n        }\n    }\n\n    const renderButton = () => {\n        if(props.isInside) {\n            return (\n                <div className=\"entered-border\">\n                    <button className=\"btn btn-primary button enter-button\" onClick={handleClick}>Enter</button>\n                </div>\n            );\n        }\n        return <button className=\"btn btn-primary button\" onClick={handleClick}>Enter</button>;\n    }\n\n    return renderButton();\n}\n\nexport default EnterButton;","import React from \"react\";\nimport workLogger from \"../../api/workLogger\";\n\ntype Props = {\n    trackLogRequest: (success: boolean, enter: boolean | null, bannerMessage?: string) => void,\n    isInside: boolean\n}\n\nconst ExitButton = (props: Props) => {\n    const handleClick = async () => {\n        try{\n            if(props.isInside) {\n                await workLogger.put(\"/log\", {\n                    dateString: new Date().toString()\n                });\n                props.trackLogRequest(true, false);\n            } else {\n                props.trackLogRequest(false, null, \"Can't exit without entering!\");\n            }\n        } catch(err) {\n            if(err.message === \"Network Error\") {\n                props.trackLogRequest(true, false);\n            }\n        }\n    }\n\n    return <button className=\"btn btn-primary button\" onClick={handleClick}>Exit</button>;\n}\n\nexport default ExitButton;","import React from \"react\";\nimport workLogger from \"../../api/workLogger\";\n\ntype Props = {\n    trackLogRequest: (success: boolean, enter: boolean | null, bannerMessage?: string) => void,\n    isInside: boolean\n}\n\nconst SendLogButton = (props: Props) => {\n    const handleClick = async () => {\n        try {\n            await workLogger.post(\"/send\", {\n                dateString: new Date().toString(),\n                userEmail: gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getEmail()\n            });\n            props.isInside ? props.trackLogRequest(true, true) : props.trackLogRequest(true, false);\n        } catch(err) {\n            if(err.message === \"Network Error\") {\n                props.trackLogRequest(true, false);\n            } else {\n                props.trackLogRequest(false, null, \"Something Went Wrong!\");\n            }\n        }\n    }\n\n    return <button className=\"btn btn-primary button\" onClick={handleClick}>Send Log</button>;\n}\n\nexport default SendLogButton;","import React from \"react\";\nimport \"./GoogleAuth.scss\";\n\nclass GoogleAuth extends React.Component {\n\n    handleSignIn = () => {\n        gapi.auth2.getAuthInstance().signIn();\n    }\n\n    render() {\n        return (\n            <div id=\"auth-button\" onClick={this.handleSignIn}>\n                <img id=\"auth-icon\" src={`${process.env.PUBLIC_URL}/icon.png`} alt=\"\"/>\n                <span id=\"auth-text\">Log In With TechSee User</span>\n            </div>\n        );\n    } \n}\n\nexport default GoogleAuth;","import React from \"react\";\nimport EnterButton from \"./EnterButton\";\nimport ExitButton from \"./ExitButton\";\nimport SendLogButton from \"./SendLogButton\";\nimport \"./WorkLoggerMenu.scss\";\nimport GoogleAuth from \"../GoogleAuth\";\n\ntype Props = {\n    trackLogRequest: (success: boolean, enter: boolean | null, bannerMessage?: string) => void,\n    isInOffice: boolean | null,\n    currentUser: GoogleUser | null\n}\n\nconst WorkLoggerMenu = (props: Props) => {\n    const renderMenu = () => {\n        if(props.currentUser && props.currentUser.isSignedIn() && props.isInOffice !== null) {\n            return (\n                <div className=\"menu\">\n                    <h1 className=\"heading\">\n                        <img className=\"techsee-icon\" src={`${process.env.PUBLIC_URL}/icon.png`} alt=\"\"/> Work Logger\n                    </h1>\n                    <EnterButton trackLogRequest={props.trackLogRequest} isInside={props.isInOffice}/>\n                    <ExitButton trackLogRequest={props.trackLogRequest} isInside={props.isInOffice}/>\n                    <SendLogButton trackLogRequest={props.trackLogRequest} isInside={props.isInOffice}/>\n                </div>\n            );\n        }\n        return <GoogleAuth/>;\n    }\n\n    return renderMenu();\n}\n\nexport default WorkLoggerMenu;","import React from \"react\";\nimport \"./LoadingSpinner.scss\";\n\n\nconst LoadingSpinner = () => {\n    return (\n        <div className=\"spinner-border\" role=\"status\">\n            <span className=\"sr-only\">Loading...</span>\n        </div>\n    );\n}\n\nexport default LoadingSpinner;","import React from \"react\";\nimport workLogger from \"../api/workLogger\";\nimport { validUser, isUsingSafari } from \"../utils\";\nimport clientId from \"../api/OAuth\";\nimport StatusBanner from \"./StatusBanner\";\nimport WorkLoggerMenu from \"./menu/WorkLoggerMenu\";\nimport LoadingSpinner from \"./LoadingSpinner\";\nimport \"./App.scss\";\n\ntype State = {\n    logStatus: boolean,\n    success: boolean,\n    inOffice: boolean | null,\n    isLoading: boolean,\n    currentUser: GoogleUser | null,\n    bannerMessage: string\n}\n\n\nclass App extends React.Component<{}, State> {\n    state: State = { \n        logStatus: false,\n        success: true,\n        inOffice: false, \n        isLoading: true,\n        currentUser: null,\n        bannerMessage: \"\" \n    };\n\n    componentDidMount = () => {\n        gapi.load(\"auth2:client\", this.onAuthLoad);\n    }\n\n    onAuthLoad = async () => {\n        try {\n            await gapi.client.init({ clientId: clientId, scope: \"email\" });\n            const authInstance = gapi.auth2.getAuthInstance();\n            authInstance.isSignedIn.listen(this.onSignIn);\n            const user = authInstance.currentUser.get();\n            if(!user.isSignedIn()){\n                this.setState({ currentUser: user, isLoading: false });\n            } else {\n                this.setState({ currentUser: user, isLoading: true });\n            }\n            this.fetchAppStatus();\n        } catch(err) {\n            if(isUsingSafari) {\n                alert(\"There is a bug with Safari, please clear your cache and try again in 5 minutes or open in private mode\");\n            }\n        }\n    }\n\n    onSignIn = (signedIn: boolean) => {\n        if(signedIn && this.state.currentUser) {\n            if(validUser(this.state.currentUser)){\n                this.setState({ isLoading: false });\n            } else {\n                gapi.auth2.getAuthInstance().signOut();\n                this.trackLogRequest(false, this.state.inOffice, \"You need a TechSee email to use this app\")\n            }\n        } else {\n            this.setState({ currentUser: null });\n        }\n    }\n\n    fetchAppStatus = async () => {\n        if(this.state.currentUser && this.state.currentUser.isSignedIn()) {\n            const response = await workLogger.post(\"/check\", {\n                userEmail: this.state.currentUser.getBasicProfile().getEmail()\n            });\n            response.data ? this.setState({ inOffice: true, isLoading: false }) : this.setState({ inOffice: false, isLoading: false });\n        } \n    }\n\n    trackLogRequest = (success: boolean, inOffice: boolean | null, bannerMessage?: string) => {\n        const message = bannerMessage ? bannerMessage : \"\";\n        if(inOffice !== null) {\n            this.setState({ logStatus: true, success: success, inOffice: inOffice, bannerMessage: message });\n        } else {\n            this.setState({ logStatus: true, success: success, bannerMessage: message });\n        }\n        setTimeout(() => this.setState({ logStatus: false }), 3000);\n    }\n\n    renderContent = () => {\n        return (\n            <>\n                <StatusBanner \n                    mounted={this.state.logStatus} \n                    success={this.state.success}\n                    message={this.state.bannerMessage}\n                />\n                <WorkLoggerMenu \n                    trackLogRequest={this.trackLogRequest} \n                    isInOffice={this.state.inOffice} \n                    currentUser={this.state.currentUser}\n                />\n            </>\n        );\n    }\n\n    render() {\n        if(this.state.isLoading) {\n            return <LoadingSpinner/>\n        }\n        return this.renderContent();\n    }\n}\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App/>, document.querySelector(\"#root\"));"],"sourceRoot":""}