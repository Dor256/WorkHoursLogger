(window["webpackJsonpwork-logger-client"]=window["webpackJsonpwork-logger-client"]||[]).push([[0],{20:function(e,t,n){e.exports=n(49)},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(18),i=n.n(s),c=n(2),o=n.n(c),l=n(3),u=n(4),m=n(5),g=n(7),p=n(6),f=n(8),h=function(e){var t=e.getBasicProfile();return!!t&&("techsee.me"===t.getEmail().split("@")[1]||"workloggersd@gmail.com"===t.getEmail())},d=window.navigator.userAgent,b=-1===d.indexOf("Chrome")&&d.indexOf("Safari")>-1,v=!0,E="351123592886-r4dbiuaq9ds53a94456ambh7tjcpm46k.apps.googleusercontent.com",w=n(19),k=n.n(w).a.create({baseURL:"https://work-logger-app.herokuapp.com"}),y=(n(43),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(g.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={visible:""},n.hideBanner=function(e){n.setState({visible:"visible hiding",tempBannerMessage:e}),setTimeout((function(){n.setState({tempBannerMessage:void 0,visible:""})}),1e3)},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.bannerMessage!==e.bannerMessage&&(this.props.bannerMessage?this.props.bannerMessage&&this.setState({visible:"visible"}):this.hideBanner(e.bannerMessage))}},{key:"render",value:function(){var e=this.state,t=e.visible,n=e.tempBannerMessage,a=this.props.bannerMessage||n||{},s=a.message,i=void 0===s?"":s,c=a.type,o=void 0===c?"":c;return r.a.createElement("div",{className:"alert".concat(o," ").concat(t),role:"alert"},i)}}]),t}(r.a.Component)),O=(n(44),function(){return r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}),N=function(e){var t=e.className,n=e.children,a=e.onClick;return r.a.createElement("button",{className:t,onClick:a},n)},x=(n(45),function(){return r.a.createElement(N,{className:"btn btn-primary button",onClick:function(){gapi.auth2.getAuthInstance().signIn()}},"Log In")}),S=function(e){var t=e.className,n=e.children;return r.a.createElement("div",{className:t},n)},B=(n(46),function(e){return r.a.createElement("h1",{className:e.className},e.children)}),L=function(e){var t=e.className,n=e.src;return r.a.createElement("img",{className:t,src:n,alt:""})},M=function(e){var t=e.className;return r.a.createElement(B,{className:"heading ".concat(t)},r.a.createElement(L,{className:"techsee-icon",src:"".concat("","/icon.png")}),"Work Logger")},j=(n(47),function(e){var t=r.a.createElement(N,{onClick:e.onClick,className:"btn btn-primary button".concat(e.inOffice?" enter-button":"")},"Enter");return e.inOffice?r.a.createElement(S,{className:"entered-border"},t):t}),A=function(e){var t=e.inOffice,n=e.onEmployeeLeave,a=e.onRequestLog,s=e.onEmployeeEnter;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{onClick:s,inOffice:t}),r.a.createElement(N,{className:"btn btn-primary button",onClick:n},"Exit"),r.a.createElement(N,{className:"btn btn-primary button",onClick:a},"Send Log"))},C=(n(48),function(e){var t=e.userName,n=e.currentHour;return r.a.createElement(B,{className:"heading welcome-heading"},n<12&&n>0?"Good Morning, ".concat(t):n>=12&&n<18?"Good Afternoon, ".concat(t):"Good Evening, ".concat(t))}),I=3e3,q=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(g.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,userEmail:"",inOffice:!1},n.componentDidMount=function(){gapi.load("auth2:client",n.onAuthLoad)},n.onAuthLoad=Object(l.a)(o.a.mark((function e(){var t,a,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.init({clientId:E,scope:"email"});case 3:t=gapi.auth2.getAuthInstance(),a=t.currentUser.get(),r=a.getBasicProfile(),t.isSignedIn.listen(n.onAuthAction(a)),a.getBasicProfile()||n.setState({isLoading:!1}),s=r.getEmail(),k.post("/check",{userEmail:s}).then((function(e){n.setState({inOffice:e.data,isLoading:!1,userEmail:s,user:a})})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b&&alert("There is a bug with Safari, please clear your cache and try again in 5 minutes or open in private mode");case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),n.hideBanner=function(){n.setState({bannerMessage:void 0})},n.showBanner=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" alert-success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I;n.setState({bannerMessage:{message:e,type:t}}),setTimeout((function(){!n.state.bannerMessage||n.state.bannerMessage.message!==e||n.state.bannerMessage.type!==t||n.hideBanner()}),a)},n.onAuthAction=function(e){return function(t){var a=h(e);if(t&&a){var r=e.getBasicProfile().getEmail();n.setState({isLoading:!1,userEmail:r,user:e})}else a||(t?gapi.auth2.getAuthInstance().signOut():n.showBanner("You need a TechSee email to use this app"," alert-danger"))}},n.onEmployeeEnter=Object(l.a)(o.a.mark((function e(){var t,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.inOffice,r=t.userEmail,e.prev=1,a){e.next=10;break}if(!v){e.next=6;break}return e.next=6,k.post("/log",{dateString:(new Date).toString(),userEmail:r});case 6:n.setState({inOffice:!0}),n.showBanner("Swiped in successfuly"),e.next=11;break;case 10:n.showBanner("Tried to swipe in while already swiped"," alert-danger");case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),n.showBanner("Failed to swipe in"," alert-danger"),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),n.onEmployeeLeave=Object(l.a)(o.a.mark((function e(){var t,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.inOffice,r=t.userEmail,e.prev=1,!a){e.next=10;break}if(!v){e.next=6;break}return e.next=6,k.put("/log",{dateString:(new Date).toString(),userEmail:r});case 6:n.setState({inOffice:!1}),n.showBanner("Swiped out successfuly"),e.next=11;break;case 10:n.showBanner("Can't exit without entering"," alert-danger");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),"Network Error"===e.t0.message&&(n.showBanner("Failed to swipe out"," alert-danger"),console.error(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),n.onRequestLog=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.userEmail,e.prev=1,!v){e.next=5;break}return e.next=5,k.post("/send",{dateString:(new Date).toString(),userEmail:t});case 5:n.showBanner("Log sent successfuly"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n.showBanner("Failed to send log"," alert-danger"),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state;return e.isLoading?r.a.createElement(S,{className:"app-container"},r.a.createElement(O,null)):e.user&&h(e.user)?r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{userName:e.user.getBasicProfile().getName(),currentHour:(new Date).getHours()}),r.a.createElement(S,{className:"app-container menu"},r.a.createElement(y,{bannerMessage:this.state.bannerMessage}),r.a.createElement(M,null),r.a.createElement(A,{onEmployeeEnter:this.onEmployeeEnter,onEmployeeLeave:this.onEmployeeLeave,onRequestLog:this.onRequestLog,inOffice:this.state.inOffice}))):r.a.createElement(S,{className:"app-container menu auth"},r.a.createElement(y,{bannerMessage:this.state.bannerMessage}),r.a.createElement(M,null),r.a.createElement(x,null))}}]),t}(r.a.Component);i.a.render(r.a.createElement(q,null),document.querySelector("#root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.a160c8df.chunk.js.map